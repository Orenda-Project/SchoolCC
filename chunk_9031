  SELECT 1 FROM schools WHERE emis_number = '37330511'
);

-- Insert if not exists: GGPS Kharakan (EMIS: 37330515)
INSERT INTO schools (
  id, name, code, emis_number, cluster_id, district_id, markaz_id,
  address, created_at,
  total_students, present_students, absent_students,
  total_teachers, present_teachers, absent_teachers,
  total_toilets, working_toilets, broken_toilets,
  is_drinking_water_available
)
SELECT
  gen_random_uuid(),
  'GGPS Kharakan',
  'SCH-37330515',
  '37330515',
  (SELECT id FROM clusters WHERE code = 'RWP-C' LIMIT 1),
  (SELECT id FROM districts WHERE code = 'RWP' LIMIT 1),
  (SELECT id FROM markazes WHERE UPPER(TRIM(REGEXP_REPLACE(name, '\.+$', ''))) = 'JHATTA HATHIAL FEMALE' LIMIT 1),
  'Rawalpindi, Pakistan',
  NOW(),
  0, 0, 0, 0, 0, 0, 0, 0, 0, false
WHERE NOT EXISTS (
  SELECT 1 FROM schools WHERE emis_number = '37330515'
);

-- Insert if not exists: GGPS Khinger Kalan (EMIS: 37330516)
INSERT INTO schools (
  id, name, code, emis_number, cluster_id, district_id, markaz_id,
  address, created_at,
  total_students, present_students, absent_students,
  total_teachers, present_teachers, absent_teachers,
  total_toilets, working_toilets, broken_toilets,
  is_drinking_water_available
)
SELECT
  gen_random_uuid(),
  'GGPS Khinger Kalan',
  'SCH-37330516',
  '37330516',
  (SELECT id FROM clusters WHERE code = 'RWP-C' LIMIT 1),
  (SELECT id FROM districts WHERE code = 'RWP' LIMIT 1),
  (SELECT id FROM markazes WHERE UPPER(TRIM(REGEXP_REPLACE(name, '\.+$', ''))) = 'JHATTA HATHIAL FEMALE' LIMIT 1),
  'Rawalpindi, Pakistan',
  NOW(),
  0, 0, 0, 0, 0, 0, 0, 0, 0, false
WHERE NOT EXISTS (
  SELECT 1 FROM schools WHERE emis_number = '37330516'
);
